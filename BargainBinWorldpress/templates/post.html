{% extends 'default.html' %}
{% load customfilters %}

{% block title %}
{{ post.title }}
{% endblock title %}

{% block content %}
<article class="post">
                <h3>{{ post.title }}</h3>
        <div class="post-badges">
            <span class="text-muted">автор:</span>
            <span class="badge rounded-pill bg-secondary">
                <a href="/?author={{post.author.pk}}" class="text-white">{{ post.author }}</a>
            </span>
            <span class="badge rounded-pill bg-secondary">{{ post.publication_date|date:'d M Y'|default:"из недалекого будущего" }}</span>
            <span class="text-muted">рубрика:</span>
            <span class="badge rounded-pill bg-info">
                <a href="/?category={{post.category.pk}}" class="text-white">{{ post.category.title }}</a>
            </span>
            {% if not post.is_article %}
                <span class="badge rounded-pill bg-info">
                    <a href="/news" class="text-white">новости</a>
                </span>
            {% endif %}

        </div>
        <div class="post_content">
            {{ post.content |  no_naughty_words | safe }}
        </div>
 <div class="post-tags">
            <span class="text-muted">теги:</span>
            {% for tag in post.tags.all %}
                <span class="badge rounded-pill bg-secondary">
                    <a href="/?tags={{tag.pk}}" class="text-white">{{ tag.title }}</a></span>
            {% endfor %}
        </div>
        <div class="post-actions">
            <span class="text-muted">администрирование:</span>

            <span class="badge rounded-pill bg-info">
                <a href="/posts/edit/{{post.pk}}" class="text-white">редактировать</a>
            </span>
            <span class="badge rounded-pill bg-danger">
                <a href="/posts/delete/{{post.pk}}" class="text-white">УДОЛИТЬ!</a>
            </span>

        </div>
    </article>
<hr style="margin-top:10px">
<div class="comments">
    <p>
  <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseComments" aria-expanded="false" aria-controls="collapseComments">
    Показать Комментарии.
  </button>
</p>
<div class="collapse" id="collapseComments">
  <div class="card card-body">

      {% for comment in post.comment_set.all %}

            <div class="comment-badges">
                <span class="text-muted">автор:</span>
            <span class="badge rounded-pill bg-secondary">{{ comment.user }}</span>
            <span class="badge rounded-pill bg-secondary">{{ comment.publication_date|date:'d M Y h:m'|default:"из недалекого будущего" }}</span>
                <span class="badge rounded-pill bg-danger"><a href="#" class="text-white">-</a></span>
                <span class="badge pill bg-secondary">{{ comment.updoot_count }}</span>
                <span class="badge rounded-pill bg-success"><a href="#" class="text-white">+</a></span>
            </div>
            <div class="comment-body">
                {{ comment.content |  no_naughty_words}}
                </div>
      <hr>
      {% endfor %}

</div>
</div>

{% endblock content %}
